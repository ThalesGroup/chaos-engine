



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A tool for automated Chaos Experimentation">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Multi Module Structure - Chaos Engine</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#03a9f4">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans+Condensed:300,400,400i,700|Fira+Code&display=fallback">
        <style>body,input{font-family:"Fira Sans Condensed","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Fira Code","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="light-blue" data-md-color-accent="light-blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#multi-module-structure" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Chaos Engine" class="md-header-nav__button md-logo">
          
            <img src="../../images/icon.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Chaos Engine
            </span>
            <span class="md-header-nav__topic">
              
                Multi Module Structure
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/thalesgroup/chaos-engine/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    chaos-engine @ GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Configuration/" title="Configuration" class="md-tabs__link">
          Configuration
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Core_Modules/administrative_state/" title="Core Modules" class="md-tabs__link">
          Core Modules
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Experiment_Modules/" title="Experiment Modules" class="md-tabs__link">
          Experiment Modules
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../Logging_and_Reporting/Notifications/datadog_events/" title="Logging and Reporting" class="md-tabs__link">
          Logging and Reporting
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Quick_Start_Guide/" title="Quick Start Guide" class="md-tabs__link">
          Quick Start Guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../" title=" Developer Documentation" class="md-tabs__link md-tabs__link--active">
           Developer Documentation
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Chaos Engine" class="md-nav__button md-logo">
      
        <img src="../../images/icon.png" width="48" height="48">
      
    </a>
    Chaos Engine
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/thalesgroup/chaos-engine/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    chaos-engine @ GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../hardening/" title="Hardening Guidelines" class="md-nav__link">
      Hardening Guidelines
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Configuration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Configuration/" title="Chaos Engine Configuration" class="md-nav__link">
      Chaos Engine Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Configuration/proxy/" title="Proxy Configuration" class="md-nav__link">
      Proxy Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Configuration/security/" title="REST Security" class="md-nav__link">
      REST Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Configuration/vault_integration/" title="Vault Integration" class="md-nav__link">
      Vault Integration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Core Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Core Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Core_Modules/administrative_state/" title="Administrative State" class="md-nav__link">
      Administrative State
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Core_Modules/container_manager/" title="Container Manager" class="md-nav__link">
      Container Manager
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Core_Modules/experiment_manager/" title="Experiment Manager" class="md-nav__link">
      Experiment Manager
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Core_Modules/scheduler/" title="Scheduler" class="md-nav__link">
      Scheduler
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Experiment Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Experiment Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Experiment_Modules/" title="Experiment Modules" class="md-nav__link">
      Experiment Modules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Experiment_Modules/aws_ec2_experiments/" title="AWS EC2 Experiments" class="md-nav__link">
      AWS EC2 Experiments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Experiment_Modules/aws_rds_experiments/" title="AWS RDS Experiments" class="md-nav__link">
      AWS RDS Experiments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Experiment_Modules/cattle_pet_distinction/" title="Cattle/Pet Distinction" class="md-nav__link">
      Cattle/Pet Distinction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Experiment_Modules/gcp_compute_experiments/" title="Google Cloud Compute Engine Experiments" class="md-nav__link">
      Google Cloud Compute Engine Experiments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Experiment_Modules/gcp_memorystore_experiments/" title="Google Cloud Memorystore Experiments" class="md-nav__link">
      Google Cloud Memorystore Experiments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Experiment_Modules/kubernetes_experiments/" title="Kubernetes Module" class="md-nav__link">
      Kubernetes Module
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Experiment_Modules/pcf_experiments/" title="PCF Experiments" class="md-nav__link">
      PCF Experiments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Experiment_Modules/ssh_based_experiments/" title="SSH Based Experiments" class="md-nav__link">
      SSH Based Experiments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-10" type="checkbox" id="nav-7-10">
    
    <label class="md-nav__link" for="nav-7-10">
      Script Experiments
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-10">
        Script Experiments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Experiment_Modules/Script_Experiments/included_script_experiments/" title="Included Script Experiments" class="md-nav__link">
      Included Script Experiments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Experiment_Modules/Script_Experiments/script_header/" title="Script Header" class="md-nav__link">
      Script Header
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Logging and Reporting
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Logging and Reporting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1" type="checkbox" id="nav-8-1">
    
    <label class="md-nav__link" for="nav-8-1">
      Notifications
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-1">
        Notifications
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Logging_and_Reporting/Notifications/datadog_events/" title="Datatog Events" class="md-nav__link">
      Datatog Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Logging_and_Reporting/Notifications/slack/" title="Slack Notifications" class="md-nav__link">
      Slack Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Logging_and_Reporting/Notifications/xmpp/" title="XMPP Notifications" class="md-nav__link">
      XMPP Notifications
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Quick Start Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Quick Start Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Quick_Start_Guide/" title="Quick Start Guide" class="md-nav__link">
      Quick Start Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Quick_Start_Guide/config_examples/" title="Configuration Examples" class="md-nav__link">
      Configuration Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Quick_Start_Guide/kubernetes/" title="Run Chaos Engine On Kubernetes" class="md-nav__link">
      Run Chaos Engine On Kubernetes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-4" type="checkbox" id="nav-9-4">
    
    <label class="md-nav__link" for="nav-9-4">
      Experiments On AWS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-4">
        Experiments On AWS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Quick_Start_Guide/Experiments_On_AWS/" title="Chaos Engine experiments with AWS" class="md-nav__link">
      Chaos Engine experiments with AWS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10" checked>
    
    <label class="md-nav__link" for="nav-10">
       Developer Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
         Developer Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Developer Documentation" class="md-nav__link">
      Developer Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../API/" title="OpenAPI Specification" class="md-nav__link">
      OpenAPI Specification
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../annotations/" title="Chaos Engine Annotations" class="md-nav__link">
      Chaos Engine Annotations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../coding_conventions/" title="Coding Conventions" class="md-nav__link">
      Coding Conventions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../error_codes_numbering_convention/" title="Error Codes Numbering Convention" class="md-nav__link">
      Error Codes Numbering Convention
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Multi Module Structure
      </label>
    
    <a href="./" title="Multi Module Structure" class="md-nav__link md-nav__link--active">
      Multi Module Structure
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#module-structure" title="Module Structure" class="md-nav__link">
    Module Structure
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nested-modules" title="Nested Modules" class="md-nav__link">
    Nested Modules
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-modules" title="Building Modules" class="md-nav__link">
    Building Modules
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#packaging-and-assembly" title="Packaging and Assembly" class="md-nav__link">
    Packaging and Assembly
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#launcher" title="Launcher" class="md-nav__link">
    Launcher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#experiment-modules" title="Experiment Modules" class="md-nav__link">
    Experiment Modules
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-build" title="Docker Build" class="md-nav__link">
    Docker Build
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-test-resources" title="Common Test Resources" class="md-nav__link">
    Common Test Resources
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../notable_issues/" title="Notable Issues" class="md-nav__link">
      Notable Issues
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-8" type="checkbox" id="nav-10-8">
    
    <label class="md-nav__link" for="nav-10-8">
      Design Philosophy
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-10-8">
        Design Philosophy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Design_Philosophy/pipeline_design/" title="Pipeline Design Philosophy" class="md-nav__link">
      Pipeline Design Philosophy
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#module-structure" title="Module Structure" class="md-nav__link">
    Module Structure
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nested-modules" title="Nested Modules" class="md-nav__link">
    Nested Modules
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-modules" title="Building Modules" class="md-nav__link">
    Building Modules
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#packaging-and-assembly" title="Packaging and Assembly" class="md-nav__link">
    Packaging and Assembly
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#launcher" title="Launcher" class="md-nav__link">
    Launcher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#experiment-modules" title="Experiment Modules" class="md-nav__link">
    Experiment Modules
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-build" title="Docker Build" class="md-nav__link">
    Docker Build
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-test-resources" title="Common Test Resources" class="md-nav__link">
    Common Test Resources
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/thalesgroup/chaos-engine/edit/master/docs/_Developer_Documentation/multi_module.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="multi-module-structure">Multi Module Structure</h1>
<p>This page is intended to be a guide on how to create, maintain, and organize modules for components of the Chaos Engine.</p>
<h2 id="module-structure">Module Structure</h2>
<div class="codehilite"><pre><span></span>`--pom.xml (Parent)
 `-Module-A+-src
 |         `-pom.xml (Module A)
 `-Module-B+-src
           `-pom.xml (Module B)
</pre></div>
<p>The parent project directory contains a single pom.xml file that manages the entire project. The packaging field of that file will be pom. Each module is listed as a module under a modules section.</p>
<p><strong>Parent POM</strong>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="nt">&gt;</span>
...
    <span class="nt">&lt;modules&gt;</span>
        <span class="nt">&lt;module&gt;</span>Module-A<span class="nt">&lt;/module&gt;</span>
        <span class="nt">&lt;module&gt;</span>Module-B<span class="nt">&lt;/module&gt;</span>
    <span class="nt">&lt;/modules&gt;</span>
    <span class="nt">&lt;packaging&gt;</span>pom<span class="nt">&lt;/packaging&gt;</span>
...
<span class="nt">&lt;/project&gt;</span>
</pre></div></p>
<p>Each module exists as a directory, exactly as named in the module field. That directory needs to contain a pom.xml in its root. Those pom.xml files may reference the project pom as their parent.</p>
<div class="superfences-tabs">
<input name="__tabs_1" type="radio" id="__tab_1_0" checked="checked" />
<label for="__tab_1_0">Example Module</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;parent&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>parent-artifact<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>parent.group<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.0.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/parent&gt;</span>
    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

    <span class="nt">&lt;artifactId&gt;</span>Module-B<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>

    <span class="nt">&lt;dependencies&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>parent.group<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>Module-A<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${project.version}<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;scope&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>

<span class="nt">&lt;/project&gt;</span>
</pre></div></div>
</div>
<p>The child pom may reference other modules as dependencies. If this is done, they should be set with scope of provided. This ensures that the build process does not include the dependent JAR inside the child JAR.</p>
<h3 id="nested-modules">Nested Modules</h3>
<p>To keep the root level clean, similar module types should be grouped together with a second level module. This prevents the need to regularly add updates to the project pom. This second level module will be of type <strong>packaging</strong> = <strong>pom</strong>, and be declared as a module of the parent.</p>
<div class="codehilite"><pre><span></span>chaosengine
|-- chaosengine-core
|   |-- pom.xml
|   `-- src
|       |-- main
|       `-- test
|-- chaosengine-experiments
|   |-- chaosengine-aws-ec2
|   |   |-- pom.xml
|   |   `-- src
|   |-- chaosengine-aws-rds
|   |   |-- pom.xml
|   |   `-- src
|   |-- chaosengine-kubernetes
|   |   |-- pom.xml
|   |   `-- src
|   |-- chaosengine-pcf
|   |   |-- pom.xml
|   |   `-- src
|   `-- pom.xml
|-- chaosengine-launcher
|   |-- pom.xml
|   `-- src
|       |-- main
|       `-- test
|-- chaosengine-notifications
|   |-- chaosengine-notif-datadog
|   |   |-- pom.xml
|   |   `-- src
|   |-- chaosengine-notif-slack
|   |   |-- pom.xml
|   |   `-- src
|   `-- pom.xml
`-- chaosengine-schedule
    |-- canada
    |   |-- pom.xml
    |   `-- src
    |-- czech-republic
    |   |-- pom.xml
    |   `-- src
    |-- france
    |   |-- pom.xml
    |   `-- src
    `-- pom.xml
</pre></div>
<h2 id="building-modules">Building Modules</h2>
<p>A successful local build of the entire project will require running the command <strong>mvn install</strong>. This will trigger a few things.</p>
<p>First, the Maven Reactor will determine the <em>necessary order</em> for building modules. The initial order will be the order of the modules in the project pom, but any dependent modules are pushed until after their dependencies are resolved. Some dependencies may not be obvious, so the modules should be maintained in a logical build order if possible.</p>
<p>Second, the project pom has been configured so that the <strong>clean</strong> goal is automatically run when the builder initializes for each step. This ensures that you cannot possibly work with cached builds of the project, as a cached version of a dependent layer may either cause or hide a bug in a further layer.</p>
<p>Third, each module will go through its build process, one at a time, including unit tests, and installing to the Maven Repository. This last step is necessary so that dependencies labelled as <strong>scope = provided</strong> will have their dependencies fulfilled.</p>
<p>If any module fails at any step, the remainder of steps will be skipped. For instance, a unit test failure in the Core module prevents the Experiment modules from being compiled.</p>
<p>A final output will show the results and build times of each module the reactor built, in the order they were built, with their corresponding exit status and build time.</p>
<p><strong>Final Build Output</strong></p>
<div class="codehilite"><pre><span></span><span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"> </span><span class="nb">------------------------------------------------------------------------</span><span class="c"></span>
<span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"> Reactor Summary for chaos</span><span class="nb">-</span><span class="c">engine 1</span><span class="nt">.</span><span class="c">1</span><span class="nt">.</span><span class="c">0</span><span class="nb">-</span><span class="c">SNAPSHOT:</span>
<span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"></span>
<span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"> chaos</span><span class="nb">-</span><span class="c">engine </span><span class="nt">.......................................</span><span class="c"> SUCCESS </span><span class="k">[</span><span class="c">  3</span><span class="nt">.</span><span class="c">103 s</span><span class="k">]</span><span class="c"></span>
<span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"> chaosengine</span><span class="nb">-</span><span class="c">launcher </span><span class="nt">...............................</span><span class="c"> SUCCESS </span><span class="k">[</span><span class="c">  5</span><span class="nt">.</span><span class="c">987 s</span><span class="k">]</span><span class="c"></span>
<span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"> chaosengine</span><span class="nb">-</span><span class="c">core </span><span class="nt">...................................</span><span class="c"> SUCCESS </span><span class="k">[</span><span class="c"> 58</span><span class="nt">.</span><span class="c">850 s</span><span class="k">]</span><span class="c"></span>
<span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"> chaosengine</span><span class="nb">-</span><span class="c">kubernetes </span><span class="nt">.............................</span><span class="c"> SUCCESS </span><span class="k">[</span><span class="c"> 16</span><span class="nt">.</span><span class="c">017 s</span><span class="k">]</span><span class="c"></span>
<span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"> chaosengine</span><span class="nb">-</span><span class="c">aws</span><span class="nb">-</span><span class="c">ec2 </span><span class="nt">................................</span><span class="c"> SUCCESS </span><span class="k">[</span><span class="c">  9</span><span class="nt">.</span><span class="c">143 s</span><span class="k">]</span><span class="c"></span>
<span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"> chaosengine</span><span class="nb">-</span><span class="c">aws</span><span class="nb">-</span><span class="c">rds </span><span class="nt">................................</span><span class="c"> SUCCESS </span><span class="k">[</span><span class="c">  8</span><span class="nt">.</span><span class="c">887 s</span><span class="k">]</span><span class="c"></span>
<span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"> chaosengine</span><span class="nb">-</span><span class="c">pcf </span><span class="nt">....................................</span><span class="c"> SUCCESS </span><span class="k">[</span><span class="c"> 10</span><span class="nt">.</span><span class="c">948 s</span><span class="k">]</span><span class="c"></span>
<span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"> </span><span class="nb">------------------------------------------------------------------------</span><span class="c"></span>
<span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"> BUILD SUCCESS</span>
<span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"> </span><span class="nb">------------------------------------------------------------------------</span><span class="c"></span>
<span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"> Total time:  01:54 min</span>
<span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"> Finished at: 2019</span><span class="nb">-</span><span class="c">05</span><span class="nb">-</span><span class="c">01T13:48:34</span><span class="nb">-</span><span class="c">04:00</span>
<span class="k">[</span><span class="c">INFO</span><span class="k">]</span><span class="c"> </span><span class="nb">------------------------------------------------------------------------</span><span class="c"></span>
</pre></div>
<h3 id="packaging-and-assembly">Packaging and Assembly</h3>
<h4 id="launcher">Launcher</h4>
<p>The Launcher module requires special packaging, since it has the Main method in it. This is accomplished with the <strong>spring-boot-maven-plugin</strong> repackage. This is run by default as part of inheriting the <strong>spring-boot-starter-parent</strong>, but causes excessive and unnecessary file sizes in other modules. As such, in the project pom file, the plugin is set with <strong>configuration.skip=true</strong>, and then explicitly configured in the Launcher module pom. The launcher module is configured to create two copies of its Jar, as the repackaging will cause it to fail being consumed as a dependency in further layers.</p>
<p>The original version of the launcher Jar is unchanged. The version run through the <strong>spring-boot-maven-plugin</strong> is placed in the <strong>target/entrypoint</strong> directory. This is used to identify it in the Dockerfile and choose the starting Jar for the image to run.</p>
<h4 id="experiment-modules">Experiment Modules</h4>
<p>The experiment modules have dependencies for SDKs used explicitly in their module. To keep the ability to load these as needed, the modules use the <strong>maven-assembly-plugin</strong> configured in the project pom\'s <strong>pluginManagement</strong> section. This plugin requires that the module calling it have a file called <strong>src/assembly/bin.xml</strong> in their module folder. The assembler instructions should use an <strong>id</strong> of <strong>assembler</strong>, so that the folder structure is common, and a <strong>format</strong> of <strong>dir</strong>. Then, in the <strong>dependencySets</strong>, include the specific <strong>groupId:artifactId</strong> of any packages imported in the pom.xml, and set <strong>useTransitiveDependencies</strong> and <strong>useTransitiveFiltering</strong> to <strong>true</strong>. This will cause all required JARs, both directly and indirectly, to be assembled in a subdirectory of the assembled JAR file. This is used in the Dockerfile to side load those JARs in the ClassPath, keeping the size of the modules to a minimum.</p>
<h3 id="docker-build">Docker Build</h3>
<p>The Dockerfile has been assembled to account for the build instructions of the engine. A <strong>.dockerignore</strong> file automatically prunes out <strong>**/target/</strong> folders, as well as non-code files that are created by IDE\'s, such as <strong>.iml</strong> files.</p>
<p>All module folders are copied into the Docker image, preserving their directory structure.</p>
<p>The launcher module is run through a <strong>mvn install</strong> before the remainder of the modules are copied in. This will cache the majority of the dependencies, making future builds faster.</p>
<p>In the final image, all Jar files that end up in the <strong>target</strong> directories are copied into the <strong>lib</strong> folder, as well as all Jar files that are in <strong>target/*-assembler</strong> directories. It is expected to find exactly one Jar in <strong>chaosengine-*/target/entrypoint/*.jar</strong> from the Launcher module, and places that file as <strong>chaosengine.jar</strong> in the working directory. That Jar is called as the entrypoint.</p>
<p>The Docker image entrypoint is configured to launch the <strong>chaosengine.jar</strong>, while including all Jar files in the <strong>lib</strong> folder in its classpath. Those libraries are also imported into Spring via the <strong>loader.path</strong> property to scan for Spring Bean instantiation.</p>
<h2 id="common-test-resources">Common Test Resources</h2>
<p>In order to share common test resources (such as the <strong>application.properties</strong> or <strong>logback-test.xml</strong> configuration files), a module titled <strong>chaosengine-test-utilities</strong> exists. This module does <strong>NOT</strong> use the project module as a parent, and is instead independent. It is imported in the project pom with the scope of <strong>test</strong>. This maps all code and resources in the test utilities <strong>src</strong> folder into the classpath when running unit tests. This allows us to hold a single <strong>logback-test.xml</strong> file, plus any other files we will need to share between modules in testing.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../error_codes_numbering_convention/" title="Error Codes Numbering Convention" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Error Codes Numbering Convention
              </span>
            </div>
          </a>
        
        
          <a href="../notable_issues/" title="Notable Issues" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Notable Issues
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2018 - 2021 Thales Group<br />
2021-07-29-09:23:55
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/gemalto/chaos-engine/issues" class="md-footer-social__link fa fa-tags"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>